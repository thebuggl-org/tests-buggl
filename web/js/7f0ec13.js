(function(a){a.fn.iframePostForm=function(e){var d,b,f,c=true,g;e=a.extend({},a.fn.iframePostForm.defaults,e);if(!a("#"+e.iframeID).length){a("body").append('<iframe id="'+e.iframeID+'" name="'+e.iframeID+'" style="display:none" />')}return a(this).each(function(){f=a(this);f.attr("target",e.iframeID);f.submit(function(){c=e.post.apply(this);if(c===false){return c}g=a("#"+e.iframeID).load(function(){d=g.contents().find("body > pre");if(e.json){b=a.parseJSON(d.html())}else{b=d.html()}e.complete.apply(this,[b]);g.unbind("load");setTimeout(function(){d.html("")},1)})})})};a.fn.iframePostForm.defaults={iframeID:"iframe-post-form",json:false,post:function(){},complete:function(b){}}})(jQuery);
$(document).ready(function(){$(".infoContainer").on("click",".editInfo",function(d){d.preventDefault();var b=$(this);var a=b.attr("data-modal-title");var c=b.attr("data-success-behavior");$("#formModal .content").empty();$("#formModal .loader").show();$("#formModal").reveal({closeOnBackgroundClick:false});$.get(b.attr("href"),function(e){$("#formModal .loader").hide();$("#formModal #modalTitle").empty().html(a);$("#formModal .content").empty().html(e);$("#formModal .content .profileFormCancel").remove();$("#formModal .content").on("submit","form",function(f){f.preventDefault();$("#formModal .loader").show();$.post($(this).attr("action"),$(this).serialize(),function(g){$("#formModal .loader").hide();if(g.status=="SUCCESS"){if(g.content==null||c=="reload"){window.location.reload()}$("#formModal").trigger("reveal:close");$("#profileContent_"+g.updateId).html(g.content)}else{$("#formModal .content").empty().append(g.content)}})})})})});