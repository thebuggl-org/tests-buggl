(function(a){a.fn.search=function(b){var c={url:"",contentObject:"",loader:"",selfObject:a(this),page:1,lastPage:1,featureUrl:""};bindPagination=function(){a("a.bugglPaginationLink").each(function(){a(this).on("click",function(d){d.preventDefault();b.page=a(this).attr("page");if(b.page>b.lastPage){return}if(b.page<1){return}searchGuides()})})};bindFeature=function(){a("a[name=feature]").each(function(){self=this;a(self).on("click",function(d){d.preventDefault();clicked=a(d.currentTarget);var e=a(d.currentTarget).attr("href");a.getJSON(b.featureUrl,{id:e},function(f){if(f.success){clicked.parents("li.clearfix").remove();a("ul#eguide_list").append(f.message)}else{alert(f.message)}})})})};b=a.extend({},c,b);a(this).on("change",function(){b.page=1;a(b.contentObject).empty();searchGuides()});searchGuides=function(){var d=b.selfObject.val();a(b.loader).show();a(b.contentObject).hide();a.getJSON(b.url,{value:d,page:b.page},function(e){a(b.loader).toggle();a(b.contentObject).html(e.html);a(b.contentObject).show();a(b.loader).hide();b.lastPage=e.lastPage;bindPagination();bindFeature()})};return this}})(jQuery);