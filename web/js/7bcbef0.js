(function(a){a.fn.iframePostForm=function(e){var d,b,f,c=true,g;e=a.extend({},a.fn.iframePostForm.defaults,e);if(!a("#"+e.iframeID).length){a("body").append('<iframe id="'+e.iframeID+'" name="'+e.iframeID+'" style="display:none" />')}return a(this).each(function(){f=a(this);f.attr("target",e.iframeID);f.submit(function(){c=e.post.apply(this);if(c===false){return c}g=a("#"+e.iframeID).load(function(){d=g.contents().find("body > pre");if(e.json){b=a.parseJSON(d.html())}else{b=d.html()}e.complete.apply(this,[b]);g.unbind("load");setTimeout(function(){d.html("")},1)})})})};a.fn.iframePostForm.defaults={iframeID:"iframe-post-form",json:false,post:function(){},complete:function(b){}}})(jQuery);
(function(a){a.fn.bugglConfirm=function(b){var c=a.extend({},a.fn.bugglConfirm.defaults,b);a("#confirmModal .content .contentHolder").empty().html(c.content);a("#confirmModal #confirmModalTitle").empty().html(c.title);a("#confirmModalOk").off("click").on("click",function(d){d.preventDefault();c.onConfirm()});a("#confirmModalCancel").off("click").on("click",function(d){d.preventDefault();c.onCancel()});a("#confirmModal").reveal(c.revealOptions)};a.fn.bugglConfirm.defaults={title:"Are you sure?",content:"",onConfirm:function(){a("#confirmModal").trigger("reveal:close")},onCancel:function(){a("#confirmModal").trigger("reveal:close")},revealOptions:{closeOnBackgroundClick:false}};a.fn.bugglAlert=function(b){var c=a.extend({},a.fn.bugglAlert.defaults,b);a("#alertModal .content .contentHolder").empty().html(c.content);a("#alertModal #alertModalTitle").empty().html(c.title);a("#alertModalOk").off("click").on("click",function(d){d.preventDefault();c.onConfirm()});a("#alertModal").reveal(c.revealOptions)};a.fn.bugglAlert.defaults={title:"Success",content:"",onConfirm:function(){a("#alertModal").trigger("reveal:close")},revealOptions:{closeOnBackgroundClick:false}};a.fn.bugglConfirmLoaderShow=function(){a("#confirmModal .loader").show()};a.fn.bugglConfirmLoaderHide=function(){a("#confirmModal .loader").hide()};a.fn.bugglConfirmClose=function(){a("#confirmModal").trigger("reveal:close")}})(jQuery);
$(document).ready(function(){$(".profileInfoContainer").on("click",".editProfileInfo",function(f){f.preventDefault();var c=$(this);var b=c.attr("data-modal-title");var d=c.attr("data-success-behavior");var a=c.attr("data-profile-info-id");c.hide();$("#profileInfoDisplay_"+a).hide();$("#profileInfoDisplay_"+a).after('<span class="loader">Loading...</span>');$.get(c.attr("href"),function(e){$("#profileContent_"+a+" .loader").remove();$("#profileContent_"+a).append(e);$("#profileContent_"+a).off("submit").on("submit","#profileForm_"+a,function(g){g.preventDefault();$("#profileContent_"+a).append('<span class="loader">Loading...</span>');$.post($(this).attr("action"),$(this).serialize(),function(h){$("#profileContent_"+a+" .loader").remove();if(h.status=="SUCCESS"){if(h.content==null||d=="reload"){window.location.reload()}else{c.show();$("#profileContent_"+h.updateId).empty().html(h.content)}}else{$("#profileForm_"+a).remove();$("#profileContent_"+a).append(h.content)}})})})});$(".profileInfoContainer").on("click",".profile-cancel",function(a){a.preventDefault();var b=$(this).attr("data-profile-content-id");$("#profileForm_"+b).remove();$("#profileInfoDisplay_"+b).show();$('.editProfileInfo[data-profile-info-id="'+b+'"]').show()});$("#uploadProfilePicButton").on("click",function(a){a.preventDefault();$("#uploadProfilePicFile").trigger("click")});$("#uploadProfilePic").on("click",function(a){a.preventDefault();$("#uploadProfilePicFile").val("");$("#uploadForm").show();if($("#uploadProfilePic").attr("data-file-name")!=""){applyJCrop($("#uploadProfilePic").attr("data-file-name"),$("#uploadProfilePic .profilePicture").attr("src"),285,285)}$("#uploadProfilePicButton").show();$("#profilePicModal").show()});$("form#uploadForm").iframePostForm({json:true,post:function(){$("#cropperPhotoDisplay").append('<span class="loader">Loading</span>')},complete:function(a){if(a==null){$("#cropperPhotoDisplay .loader").remove();$.fn.bugglAlert({title:"Error",content:"Photo was not found, invalid or file size maybe too large."})}else{applyJCrop(a.filename,a.url,a.width,a.height);$("#uploadProfilePicButton").hide()}}});$("form#profilePhotoCropDimensions").iframePostForm({json:true,post:function(){},complete:function(a){$(".profilePicture").attr("src",a.url);$("#uploadProfilePic").attr("data-file-name",a.filename);$("a.closeButton").first().trigger("click")}});$("#uploadProfilePicFile").on("change",function(a){$("#profilePicModal form#uploadForm").submit()});$("#cropButton").on("click",function(a){a.preventDefault();if(parseInt($("#profilePhotoCropDimensions input[name='width']").val())){$("form#profilePhotoCropDimensions").submit();return true}$.fn.bugglAlert({title:"Error",content:"<p>Please select a cropped area!</p>"});return false});$("a.closeButton").on("click",function(a){a.preventDefault();$("#profilePhotoCropDimensions input[name='x-coord']").val("");$("#profilePhotoCropDimensions input[name='y-coord']").val("");$("#profilePhotoCropDimensions input[name='width']").val("");$("#profilePhotoCropDimensions input[name='height']").val("");$("#profilePhotoCropDimensions input[name='filename']").val("");$("#profilePhotoCropDimensions input[name='tempPath']").val("");$("#cropperPhotoDisplay").empty();$("#profilePicModal").hide()});applyJCrop=function(c,d,e,a){var f=(400*e)/a;$("#cropperPhotoDisplay").empty().append('<span class="loader">Loading</span>');var b=new Image();$(b).load(function(){$("#cropperPhotoDisplay").empty().append(b);$("#profilePhotoCropDimensions input[name='filename']").val(c);$(b).Jcrop({aspectRatio:1,trueSize:[e,a],setSelect:[0,0,250,300],onSelect:function(g){$("#profilePhotoCropDimensions input[name='x-coord']").val(g.x);$("#profilePhotoCropDimensions input[name='y-coord']").val(g.y);$("#profilePhotoCropDimensions input[name='width']").val(g.w);$("#profilePhotoCropDimensions input[name='height']").val(g.h)}})}).attr({src:d,height:"400px",width:f+"px"})}});
$(document).ready(function(){$(".infoContainer").on("click",".editInfo",function(d){d.preventDefault();var b=$(this);var a=b.attr("data-modal-title");var c=b.attr("data-success-behavior");$("#formModal .content").empty();$("#formModal .loader").show();$("#formModal").reveal({closeOnBackgroundClick:false});$.get(b.attr("href"),function(e){$("#formModal .loader").hide();$("#formModal #modalTitle").empty().html(a);$("#formModal .content").empty().html(e);$("#formModal .content .profileFormCancel").remove();$("#formModal .content").on("submit","form",function(f){f.preventDefault();$("#formModal .loader").show();$.post($(this).attr("action"),$(this).serialize(),function(g){$("#formModal .loader").hide();if(g.status=="SUCCESS"){if(g.content==null||c=="reload"){window.location.reload()}$("#formModal").trigger("reveal:close");$("#profileContent_"+g.updateId).html(g.content)}else{$("#formModal .content").empty().append(g.content)}})})})})});
(function(a){a(document).ready(function(){a(".requestbtn").on("click",function(d){d.preventDefault();a("div#req").reveal();a("input[type=text]").val("");a("textarea[name=description]").val("");a(".warning-notif").text("")});a("#submitrequest").click(function(g){g.preventDefault();var f=true;if(c(a.trim(a("input[name=price]").val()))){f=false;b("price_not_int")}if(a.trim(a("input[name=price]").val())==""){f=false;b("price_empty")}if(a.trim(a("textarea[name=description]").val())==""){f=false;b("message")}if(f){a(this).attr("disabled",true);var e=a("#request_form").serialize();var d=a("#request_form").attr("action");a.post(d,e,function(h){a(".reveal-modal").trigger("reveal:close");a("#submitrequest").attr("disabled",false);if(h.success==true){window.location.reload()}})}});a("input[name=price]").keyup(function(d){if(this.value!=this.value.replace(/[^0-9\.]/g,"")){this.value=this.value.replace(/[^0-9\.]/g,"")}if(a(this).val().length!=0){a("#messagenotif1").text("")}});a("textarea[name=description]").keyup(function(d){if(a(this).val().length!=0){a("#messagenotif2").text("")}});function b(d){if(d=="message"){a("#messagenotif2").text("Message should not be empty")}else{if(d=="price_empty"){a("#messagenotif1").text("Price should not be empty")}else{if(d=="price_not_int"){a("#messagenotif1").text("Price should be a valid number")}}}}function c(d){return isNaN(d)}a("a.disabled").click(function(){return false})})})(jQuery);